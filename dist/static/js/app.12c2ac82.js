(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t,n){e.exports=n("56d7")},"00a8":function(e,t,n){"use strict";n("9f82")},"073d":function(e,t){var n={},a=function(e){var t="1.23452384164.123412415";null!==document.getElementById(t)&&document.body.removeChild(document.getElementById(t));var n=document.createElement("canvas");n.width=200,n.height=150;var a=n.getContext("2d");a.rotate(-20*Math.PI/180),a.font="16px Microsoft JhengHei",a.fillStyle="rgba(200, 200, 200, 200)",a.textAlign="left",a.textBaseline="Middle",a.fillText(e,n.width/10,n.height/2);var i=document.createElement("div");return i.id=t,i.style.pointerEvents="none",i.style.top="0px",i.style.left="0px",i.style.opacity="0.2",i.style.position="fixed",i.style.zIndex="100000",i.style.width=document.documentElement.clientWidth+"px",i.style.height=document.documentElement.clientHeight+"px",i.style.background="url("+n.toDataURL("image/png")+") left top repeat",document.body.appendChild(i),t};n.set=function(e){var t=a(e);setInterval((function(){null===document.getElementById(t)&&(t=a(e))}),500)},e.exports=n},3317:function(e,t,n){},"4dbd":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=(n("f5df1"),n("5c96")),r=n.n(i),o=(n("0fae"),n("b20f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)}),s=[],c={name:"App"},u=c,d=n("2877"),l=Object(d["a"])(u,o,s,!1,null,null,null),f=l.exports,p=n("2f62"),m=(n("b0c0"),{sidebar:function(e){return e.app.sidebar},device:function(e){return e.app.device},token:function(e){return e.user.token},avatar:function(e){return e.user.avatar},name:function(e){return e.user.name},roles:function(e){return e.user.roles},permission_routes:function(e){return e.permission.routes}}),h=m,b=n("a78e"),v=n.n(b),g={sidebar:{opened:!v.a.get("sidebarStatus")||!!+v.a.get("sidebarStatus"),withoutAnimation:!1},device:"desktop"},E={TOGGLE_SIDEBAR:function(e){e.sidebar.opened=!e.sidebar.opened,e.sidebar.withoutAnimation=!1,e.sidebar.opened?v.a.set("sidebarStatus",1):v.a.set("sidebarStatus",0)},CLOSE_SIDEBAR:function(e,t){v.a.set("sidebarStatus",0),e.sidebar.opened=!1,e.sidebar.withoutAnimation=t},TOGGLE_DEVICE:function(e,t){e.device=t}},w={toggleSideBar:function(e){var t=e.commit;t("TOGGLE_SIDEBAR")},closeSideBar:function(e,t){var n=e.commit,a=t.withoutAnimation;n("CLOSE_SIDEBAR",a)},toggleDevice:function(e,t){var n=e.commit;n("TOGGLE_DEVICE",t)}},x={namespaced:!0,state:g,mutations:E,actions:w},S=n("83d6"),k=n.n(S),T=k.a.showSettings,_=k.a.fixedHeader,O=k.a.sidebarLogo,A={showSettings:T,fixedHeader:_,sidebarLogo:O},y={CHANGE_SETTING:function(e,t){var n=t.key,a=t.value;e.hasOwnProperty(n)&&(e[n]=a)}},C={changeSetting:function(e,t){var n=e.commit;n("CHANGE_SETTING",t)}},$={namespaced:!0,state:A,mutations:y,actions:C},j=(n("d3b7"),n("bc3a")),B=n.n(j),M="Token";function R(){return v.a.get(M)}function I(e){return v.a.set(M,e)}function L(){return v.a.remove(M)}var H=B.a.create({baseURL:"https://cwp-api.qa.huohua.cn",timeout:6e4});H.interceptors.request.use((function(e){return He.getters.token&&(e.headers["Authorization"]=R()),e}),(function(e){return console.log(e),Promise.reject(e)})),H.interceptors.response.use((function(e){var t=e.data;return 2e4===t.code?t:50008===t.code?(i["MessageBox"].confirm("登录已经失效，请重新登录","通知",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){He.dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error("登录已经失效，请重新登录"))):(Object(i["Message"])({message:t.msg,type:"error",duration:5e3}),Promise.reject(new Error(t.message||"Error")))}),(function(e){return console.log(e),Object(i["Message"])({message:"请求失败，请检查网络连接",type:"error",duration:5e3}),Promise.reject(e)}));var D=H;function P(){return D({url:"/logout",method:"post"})}n("3ca3"),n("ddb0");var G=n("8c4f"),N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-wrapper",class:e.classObj},["mobile"===e.device&&e.sidebar.opened?n("div",{staticClass:"drawer-bg",on:{click:e.handleClickOutside}}):e._e(),n("sidebar",{staticClass:"sidebar-container"}),n("div",{staticClass:"main-container"},[n("div",{class:{"fixed-header":e.fixedHeader}},[n("navbar")],1),n("app-main")],1)],1)},z=[],F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navbar"},[n("div",{staticClass:"right-menu"},[n("el-dropdown",{staticClass:"avatar-container",attrs:{trigger:"click"}},[n("div",{staticClass:"avatar-wrapper"},[n("img",{staticClass:"user-avatar",attrs:{src:"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif?imageView2/1/w/80/h/80"}}),n("i",{staticClass:"el-icon-caret-bottom"})]),n("el-dropdown-menu",{staticClass:"user-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){return e.logout(t)}}},[n("span",{staticStyle:{display:"block"}},[e._v("注销")])])],1)],1)],1)])},U=[],V=n("c7eb"),q=n("1da1"),J=n("5530"),K={components:{},computed:Object(J["a"])({},Object(p["b"])(["sidebar","avatar"])),methods:{toggleSideBar:function(){this.$store.dispatch("app/toggleSideBar")},logout:function(){var e=this;return Object(q["a"])(Object(V["a"])().mark((function t(){return Object(V["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("user/logout");case 2:e.$router.push("/login?redirect=".concat(e.$route.fullPath));case 3:case"end":return t.stop()}}),t)})))()}}},W=K,Q=(n("6718"),Object(d["a"])(W,F,U,!1,null,"2421b992",null)),Y=Q.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebar-container"},[n("el-menu",{attrs:{"default-active":e.activeMenu,"collapse-transition":!1,"unique-opened":!1,collapse:e.isCollapse,"background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#409EFF",mode:"vertical"}},[n("el-menu-item",{attrs:{index:"/"},on:{click:function(t){return e.handleMenuItemClick("/")}}},[n("i",{staticClass:"el-icon-s-home"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("仪表盘")])]),n("el-menu-item",{attrs:{index:"/data"},on:{click:function(t){return e.handleMenuItemClick("/data")}}},[n("i",{staticClass:"el-icon-s-data"}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("数据面板")])])],1)],1)},Z=[],ee={name:"Sidebar",computed:{activeMenu:function(){var e=this.$route,t=e.meta,n=e.path;return t.activeMenu?t.activeMenu:n},isCollapse:function(){return!this.$store.state.app.sidebar.opened}},methods:{handleMenuItemClick:function(e){this.$router.push(e)}}},te=ee,ne=(n("a758"),Object(d["a"])(te,X,Z,!1,null,"9ca44d08",null)),ae=ne.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"app-main"},[n("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[n("router-view",{key:e.key})],1),e.showFooter?n("footer"):e._e()],1)},re=[],oe={name:"AppMain",computed:{key:function(){return this.$route.path},showFooter:function(){var e=this.$route.meta,t=void 0===e?{}:e;return Boolean(t.isFooter)}}},se=oe,ce=(n("00a8"),n("db0c"),Object(d["a"])(se,ie,re,!1,null,"46fb126e",null)),ue=ce.exports,de=document,le=de.body,fe=992,pe={watch:{$route:function(e){"mobile"===this.device&&this.sidebar.opened&&He.dispatch("app/closeSideBar",{withoutAnimation:!1})}},beforeMount:function(){window.addEventListener("resize",this.$_resizeHandler)},beforeDestroy:function(){window.removeEventListener("resize",this.$_resizeHandler)},mounted:function(){var e=this.$_isMobile();e&&(He.dispatch("app/toggleDevice","mobile"),He.dispatch("app/closeSideBar",{withoutAnimation:!0}))},methods:{$_isMobile:function(){var e=le.getBoundingClientRect();return e.width-1<fe},$_resizeHandler:function(){if(!document.hidden){var e=this.$_isMobile();He.dispatch("app/toggleDevice",e?"mobile":"desktop"),e&&He.dispatch("app/closeSideBar",{withoutAnimation:!0})}}}},me={name:"Layout",components:{Navbar:Y,Sidebar:ae,AppMain:ue},mixins:[pe],computed:{sidebar:function(){return this.$store.state.app.sidebar},device:function(){return this.$store.state.app.device},fixedHeader:function(){return this.$store.state.settings.fixedHeader},classObj:function(){return{hideSidebar:!this.sidebar.opened,openSidebar:this.sidebar.opened,withoutAnimation:this.sidebar.withoutAnimation,mobile:"mobile"===this.device}}},methods:{handleClickOutside:function(){this.$store.dispatch("app/closeSideBar",{withoutAnimation:!1})}}},he=me,be=(n("fde6"),Object(d["a"])(he,N,z,!1,null,"0ad22e5a",null)),ve=be.exports;a["default"].use(G["a"]);var ge=[{path:"/login",component:function(){return n.e("chunk-8503bddc").then(n.bind(null,"9ed6"))},hidden:!0},{path:"/404",component:function(){return n.e("chunk-94d3c3c4").then(n.bind(null,"8cdb"))},hidden:!0},{redirect:"noRedirect",path:"/",component:ve,children:[{path:"/",name:"仪表盘",component:function(){return n.e("chunk-ca169bf0").then(n.bind(null,"c937"))},meta:{title:"仪表盘",icon:"dashboard"}}]},{path:"*",redirect:"/404",hidden:!0}],Ee=function(){return new G["a"]({mode:"hash",scrollBehavior:function(){return{y:0}},routes:ge})},we=Ee();function xe(){var e=Ee();we.matcher=e.matcher}var Se=we,ke=n("073d"),Te=n.n(ke),_e=function(){return{token:R(),name:"",avatar:"",roles:[]}},Oe=_e(),Ae={RESET_STATE:function(e){Object.assign(e,_e())},SET_TOKEN:function(e,t){e.token=t},SET_NAME:function(e,t){e.name=t},SET_AVATAR:function(e,t){e.avatar=t},SET_ROLES:function(e,t){e.roles=t}},ye={login:function(e,t){var n=e.commit,a=t.username,i=t.password;return new Promise((function(e,t){if("admin"===a&&"123456"===i){var r={token:"admin-token"};n("SET_TOKEN",r.token),I(r.token),e()}else t(new Error("用户名或密码错误"))}))},getInfo:function(e){var t=e.commit;e.state;return new Promise((function(e,n){var a={roles:["admin"],name:"Admin"},i=new Date,r=i.getFullYear()+"."+(i.getMonth()+1)+"."+i.getDate();Te.a.set(a.name+"\n"+r);var o=a.roles,s=a.name;(!o||o.length<=0)&&n("getInfo: roles must be a non-null array!"),t("SET_ROLES",o),t("SET_NAME",s),e(a)}))},logout:function(e){var t=e.commit,n=e.state;return new Promise((function(e,a){P(n.token).then((function(){L(),xe(),t("RESET_STATE"),e()})).catch((function(n){L(),xe(),t("RESET_STATE"),e()}))}))},resetToken:function(e){var t=e.commit;return new Promise((function(e){L(),t("RESET_STATE"),e()}))}},Ce={namespaced:!0,state:Oe,mutations:Ae,actions:ye};n("caad"),n("2532"),n("159b"),n("99af");function $e(e,t){return!t.meta||!t.meta.roles||e.some((function(e){return t.meta.roles.includes(e)}))}function je(e,t){var n=[];return e.forEach((function(e){var a=Object(J["a"])({},e);$e(t,a)&&(a.children&&(a.children=je(a.children,t)),n.push(a))})),n}var Be={routes:[],addRoutes:[]},Me={SET_ROUTES:function(e,t){e.addRoutes=t,e.routes=ge.concat(t)}},Re={generateRoutes:function(e,t){var n=e.commit;return new Promise((function(e){var a;if(t.includes("admin")){var i=[];a=i||[]}else a=je([],t);n("SET_ROUTES",a),e(a)}))}},Ie={namespaced:!0,state:Be,mutations:Me,actions:Re};a["default"].use(p["a"]);var Le=new p["a"].Store({modules:{app:x,settings:$,user:Ce,permission:Ie},getters:h}),He=Le,De=n("323e"),Pe=n.n(De),Ge=(n("a5d8"),k.a.title||"Vue Admin Template");function Ne(e){return e?"".concat(e," - ").concat(Ge):"".concat(Ge)}Pe.a.configure({showSpinner:!1});var ze=["/login"];Se.beforeEach(function(){var e=Object(q["a"])(Object(V["a"])().mark((function e(t,n,a){var i,r,o,s,c;return Object(V["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Pe.a.start(),document.title=Ne(t.meta.title),i=R(),!i){e.next=35;break}if("/login"!==t.path){e.next=9;break}a({path:"/"}),Pe.a.done(),e.next=33;break;case 9:if(r=He.getters.roles&&He.getters.roles.length>0,!r){e.next=14;break}a(),e.next=33;break;case 14:return e.prev=14,e.next=17,He.dispatch("user/getInfo");case 17:return o=e.sent,s=o.roles,e.next=21,He.dispatch("permission/generateRoutes",s);case 21:c=e.sent,Se.options.routes=ge.concat(c),Se.addRoutes(c),a(Object(J["a"])(Object(J["a"])({},t),{},{replace:!0})),e.next=33;break;case 27:return e.prev=27,e.t0=e["catch"](14),e.next=31,He.dispatch("user/resetToken");case 31:a("/login?redirect=".concat(t.path)),Pe.a.done();case 33:e.next=36;break;case 35:-1!==ze.indexOf(t.path)?a():(a("/login?redirect=".concat(t.path)),Pe.a.done());case 36:case"end":return e.stop()}}),e,null,[[14,27]])})));return function(t,n,a){return e.apply(this,arguments)}}()),Se.afterEach((function(){Pe.a.done()}));var Fe=n("130e"),Ue=n("313e");n("840a");a["default"].directive("watermark",{bind:function(e,t){var n=t.value;Te.a.set(n)}}),a["default"].use(r.a),a["default"].prototype.$echarts=Ue,a["default"].prototype.$axios=B.a,a["default"].use(Fe["a"],B.a),a["default"].config.productionTip=!1,new a["default"]({el:"#app",router:Se,store:He,render:function(e){return e(f)}})},6718:function(e,t,n){"use strict";n("4dbd")},"83d6":function(e,t){e.exports={title:"Courseware Product QA",fixedHeader:!1,sidebarLogo:!0}},"8f93":function(e,t,n){},"9eee":function(e,t,n){},"9f82":function(e,t,n){},a758:function(e,t,n){"use strict";n("8f93")},b20f:function(e,t,n){e.exports={menuText:"#bfcbd9",menuActiveText:"#409eff",subMenuActiveText:"#f4f4f5",menuBg:"#304156",menuHover:"#263445",subMenuBg:"#1f2d3d",subMenuHover:"#001528",sideBarWidth:"210px"}},db0c:function(e,t,n){"use strict";n("9eee")},fde6:function(e,t,n){"use strict";n("3317")}},[[0,"runtime","chunk-elementUI","chunk-libs"]]]);